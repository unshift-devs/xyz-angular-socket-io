!function(){"use strict";angular.module("xyz.socket",[])}(),function(){"use strict";angular.module("xyz.socket").factory("SocketWrapper",["$window","$timeout",function(n,e){function t(n,t){return t?function(){var r=arguments;e(function(){t.apply(n,r)},0)}:angular.noop}return function(e,r){function o(n,r){e.on(n,r.__ref=t(e,r))}function c(n,r){e.once(n,r.__ref=t(e,r))}function i(n,t){return t&&t.__ref&&(arguments[1]=t.__ref),e.removeListener.apply(e,arguments)}function u(){return e.disconnect()}function s(){var n=arguments.length-1,r=arguments[n];return _.isFunction(r)&&(r=t(e,r),arguments[n]=r),e.emit.apply(e,arguments)}function a(){return e.removeAllListeners.apply(e,arguments)}function f(){return e.connect()}function g(){a(),u(),e=void 0}if(!(e||_.isString(r.source)||e instanceof n.io.Socket))throw new Error("Impossible initialize a socketWrapper without a valid socket instance or a socket URL");_.isString(r.source)&&(e=n.io.connect(r.source)),o("connect",function(){l.connected=e.connected,l.connecting=!1,l.error=!1}),o("connecting",function(){l.connecting=!0}),o("disconnect",function(){l.connected=e.connected,l.connecting=!1,l.error=!1}),o("reconnect",function(){l.connected=e.connected,l.connecting=!1,l.error=!1}),o("reconnecting",function(){l.connecting=!0}),o("error",function(){l.error=!0,l.connecting=!1}),o("connect_failed",function(){l.error=!0,l.connecting=!1});var l={socket:e,on:o,addListener:o,addEventListener:o,once:c,emit:s,removeListener:i,removeEventListener:i,removeAllListeners:a,disconnect:u,close:u,connect:f,connected:!1,connecting:!1,error:!1,destroy:g};return l}}])}(),function(){"use strict";angular.module("xyz.socket").provider("socketManager",function(){var n;return{setSocketUrl:function(e){n=e},$get:["SocketWrapper",function(e){function t(e){var t=n;return t.lastIndexOf("/")===t.length-1&&(t=t.substring(0,t.length-1)),0!==e.indexOf("/")&&(e="/"+e),t+e}function r(n,r){if(o(n)&&!r)return s[n];var c={source:t(n),reconnectionAttempts:10};return s[n]=new e(null,c),s[n]}function o(n){return s.hasOwnProperty(n)}function c(n){if(o(n)){var e=r(n);delete s[n],e.destroy()}}function i(){angular.forEach(s,function(n,e){c(e)},u)}var u=this;if(angular.isUndefined(n))throw new Error("`socketManager` require to be configurated with a default socket url");var s={};return{get socketUrl(){return n},socketExist:o,getSocket:r,destroySocket:c,destroyAllSockets:i}}]}})}();